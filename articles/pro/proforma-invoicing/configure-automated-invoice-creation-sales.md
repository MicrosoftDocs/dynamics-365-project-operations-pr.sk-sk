---
title: Konfigurácia automatického vytvárania faktúr – čiastočné
description: Táto téma poskytuje informácie o konfigurácii automatického vytvárania zálohových faktúr.
author: rumant
manager: Annbe
ms.date: 10/13/2020
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 0ce9cb9090c44762f370bf8d574d179077b6a821
ms.sourcegitcommit: 625878bf48ea530f3381843be0e778cebbbf1922
ms.translationtype: HT
ms.contentlocale: sk-SK
ms.lasthandoff: 10/30/2020
ms.locfileid: "4176585"
---
# <a name="configure-automatic-invoice-creation---lite"></a><span data-ttu-id="41b37-103">Konfigurácia automatického vytvárania faktúr – čiastočné</span><span class="sxs-lookup"><span data-stu-id="41b37-103">Configure automatic invoice creation - lite</span></span>
 
<span data-ttu-id="41b37-104">_**Platí pre:** Čiastočné nasadenie – dohoda o fakturácii pro forma_</span><span class="sxs-lookup"><span data-stu-id="41b37-104">_**Applies To:** Lite deployment - deal to proforma invoicing_</span></span>

<span data-ttu-id="41b37-105">V aplikácii Dynamics 365 Project Operations môžete nakonfigurovať automatické vytváranie faktúr.</span><span class="sxs-lookup"><span data-stu-id="41b37-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="41b37-106">Systém vytvorí koncept zálohovej faktúry na základe plánu faktúr pre každú projektovú zmluvu a riadok zmluvy.</span><span class="sxs-lookup"><span data-stu-id="41b37-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="41b37-107">Plány faktúr sa konfigurujú na úrovni riadka zmluvy.</span><span class="sxs-lookup"><span data-stu-id="41b37-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="41b37-108">Každý riadok zmluvy môže mať samostatný plán faktúr alebo môže byť v každom riadku zmluvy uvedený rovnaký plán faktúr.</span><span class="sxs-lookup"><span data-stu-id="41b37-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="41b37-109">Pri vytváraní faktúry systém vždy vytvorí minimálne jednu faktúru pre každú projektovú zmluvu.</span><span class="sxs-lookup"><span data-stu-id="41b37-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="41b37-110">V niektorých prípadoch môže byť vytvorených viac faktúr.</span><span class="sxs-lookup"><span data-stu-id="41b37-110">In some cases, there may be multiple invoices created.</span></span>

<span data-ttu-id="41b37-111">Napríklad, ak má zmluva viac zákazníkov, vytvorí sa rovnaký počet faktúr ako počet zákazníkov, ktorí majú fakturovateľné transakcie, ktoré sa majú fakturovať na základe tejto projektovej zmluvy.</span><span class="sxs-lookup"><span data-stu-id="41b37-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="41b37-112">Pochopte, ako sú transakcie zahrnuté vo faktúre</span><span class="sxs-lookup"><span data-stu-id="41b37-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="41b37-113">Niekedy každý riadok zmluvy na základe projektu určuje osobitný plán faktúr.</span><span class="sxs-lookup"><span data-stu-id="41b37-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="41b37-114">Napríklad, realizačné služby pre zmluvu Adatum majú nasledujúce riadky zmluvy:</span><span class="sxs-lookup"><span data-stu-id="41b37-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="41b37-115">Prototypová práca, ktorá predstavuje pevnú cenu s dvoma manuálne vytvorenými medzníkmi.</span><span class="sxs-lookup"><span data-stu-id="41b37-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="41b37-116">Realizačné práce, ktoré zahŕňajú čas, a budú sa účtovať každé dva týždne v pondelok.</span><span class="sxs-lookup"><span data-stu-id="41b37-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="41b37-117">Výdavky, ktoré je potrebné fakturovať každý prvý pondelok v mesiaci.</span><span class="sxs-lookup"><span data-stu-id="41b37-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="41b37-118">Plány faktúr definované pre každú z týchto dvoch riadkových položiek vyzerajú podobne ako v nasledujúcej tabuľke:</span><span class="sxs-lookup"><span data-stu-id="41b37-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="41b37-119">Riadok zmluvy</span><span class="sxs-lookup"><span data-stu-id="41b37-119">Contract line</span></span> | <span data-ttu-id="41b37-120">Dátum spustenia faktúry</span><span class="sxs-lookup"><span data-stu-id="41b37-120">Invoice run date</span></span> | <span data-ttu-id="41b37-121">Dátum uzávierky transakcie</span><span class="sxs-lookup"><span data-stu-id="41b37-121">Transaction cut-off date</span></span> | <span data-ttu-id="41b37-122">Dátum medzníka</span><span class="sxs-lookup"><span data-stu-id="41b37-122">Milestone date</span></span> | <span data-ttu-id="41b37-123">Suma medzníka</span><span class="sxs-lookup"><span data-stu-id="41b37-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="41b37-124">Prototypová práca</span><span class="sxs-lookup"><span data-stu-id="41b37-124">Prototype work</span></span> | <span data-ttu-id="41b37-125">5. októbra, pondelok</span><span class="sxs-lookup"><span data-stu-id="41b37-125">October 5, Monday</span></span> | - | <span data-ttu-id="41b37-126">5. októbra, pondelok</span><span class="sxs-lookup"><span data-stu-id="41b37-126">October 5, Monday</span></span> | <span data-ttu-id="41b37-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="41b37-127">5000 USD</span></span> |
| - | <span data-ttu-id="41b37-128">3. novembra, utorok</span><span class="sxs-lookup"><span data-stu-id="41b37-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="41b37-129">3. novembra, utorok</span><span class="sxs-lookup"><span data-stu-id="41b37-129">November 3, Tuesday</span></span> | <span data-ttu-id="41b37-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="41b37-130">12,000 USD</span></span> |
| <span data-ttu-id="41b37-131">Realizačné práce</span><span class="sxs-lookup"><span data-stu-id="41b37-131">Implementation work</span></span> | <span data-ttu-id="41b37-132">5. októbra, pondelok</span><span class="sxs-lookup"><span data-stu-id="41b37-132">October 5, Monday</span></span> | <span data-ttu-id="41b37-133">4. októbra, nedeľa</span><span class="sxs-lookup"><span data-stu-id="41b37-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="41b37-134">19. októbra, pondelok</span><span class="sxs-lookup"><span data-stu-id="41b37-134">October 19, Monday</span></span> | <span data-ttu-id="41b37-135">18. októbra, nedeľa</span><span class="sxs-lookup"><span data-stu-id="41b37-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="41b37-136">2. novembra, pondelok</span><span class="sxs-lookup"><span data-stu-id="41b37-136">November 2, Monday</span></span> | <span data-ttu-id="41b37-137">1. novembra, nedeľa</span><span class="sxs-lookup"><span data-stu-id="41b37-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="41b37-138">16. novembra, pondelok</span><span class="sxs-lookup"><span data-stu-id="41b37-138">November 16, Monday</span></span> | <span data-ttu-id="41b37-139">15. novembra, nedeľa</span><span class="sxs-lookup"><span data-stu-id="41b37-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="41b37-140">Vzniknuté výdavky</span><span class="sxs-lookup"><span data-stu-id="41b37-140">Expenses incurred</span></span> | <span data-ttu-id="41b37-141">5. októbra, pondelok</span><span class="sxs-lookup"><span data-stu-id="41b37-141">October 5, Monday</span></span> | <span data-ttu-id="41b37-142">4. októbra, nedeľa</span><span class="sxs-lookup"><span data-stu-id="41b37-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="41b37-143">2. novembra, pondelok</span><span class="sxs-lookup"><span data-stu-id="41b37-143">November 2, Monday</span></span> | <span data-ttu-id="41b37-144">1. novembra, nedeľa</span><span class="sxs-lookup"><span data-stu-id="41b37-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="41b37-145">V tomto príklade, keď je v prevádzke automatická fakturácia:</span><span class="sxs-lookup"><span data-stu-id="41b37-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="41b37-146">**4. októbra alebo akýkoľvek predchádzajúci deň**: Pre túto zmluvu sa negeneruje žiadna faktúra, pretože tabuľka **Plán faktúry** pre každý z týchto riadkov zmluvy nevyvoláva 4. október v nedeľu ako dátum spustenia faktúry.</span><span class="sxs-lookup"><span data-stu-id="41b37-146">**October 4 or any date before**: No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="41b37-147">**5. októbra pondelok** : Jedna faktúra sa vygeneruje pre:</span><span class="sxs-lookup"><span data-stu-id="41b37-147">**October 5 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="41b37-148">Prototypovú prácu, ktorá obsahuje medzník, ak je označená ako **Pripravená na fakturáciu**.</span><span class="sxs-lookup"><span data-stu-id="41b37-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="41b37-149">Realizačné práce, ktoré zahŕňajú všetky časové transakcie vytvorené pred dátumom ukončenia transakcie 4. októbra v nedeľu, ktoré sú označené ako **Pripravené na fakturáciu**.</span><span class="sxs-lookup"><span data-stu-id="41b37-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="41b37-150">Realizačné práce, ktoré zahŕňajú všetky časové transakcie vytvorené pred dátumom ukončenia transakcie 4. októbra v nedeľu, ktoré sú označené ako **Pripravené na fakturáciu**.</span><span class="sxs-lookup"><span data-stu-id="41b37-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="41b37-151">**6. októbra alebo akýkoľvek deň pred 19. októbrom**: Pre túto zmluvu sa negeneruje žiadna faktúra, pretože tabuľka **Plán faktúry** pre každý z týchto riadkov zmluvy nevyvoláva 6. október ani akýkoľvek deň pred 19. októbrom ako dátum spustenia faktúry.</span><span class="sxs-lookup"><span data-stu-id="41b37-151">**On October 6 or any date before October 19**: No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="41b37-152">**19. októbra, pondelok**: Jedna faktúra sa vygeneruje pre realizačné práce, ktoré zahŕňajú všetky časové transakcie vytvorené pred dátumom ukončenia transakcie 18. októbra v nedeľu, ktoré sú označené ako **Pripravené na fakturáciu**.</span><span class="sxs-lookup"><span data-stu-id="41b37-152">**October 19, Monday**: One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="41b37-153">**2. novembra, pondelok** : Jedna faktúra sa vygeneruje pre:</span><span class="sxs-lookup"><span data-stu-id="41b37-153">**November 2 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="41b37-154">Realizačné práce, ktoré zahŕňajú všetky časové transakcie vytvorené pred dátumom ukončenia transakcie 1. novembra v nedeľu, ktoré sú označené ako **Pripravené na fakturáciu**.</span><span class="sxs-lookup"><span data-stu-id="41b37-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="41b37-155">Realizačné práce, ktoré zahŕňajú všetky časové transakcie vytvorené pred dátumom ukončenia transakcie 1. novembra v nedeľu, ktoré sú označené ako **Pripravené na fakturáciu**.</span><span class="sxs-lookup"><span data-stu-id="41b37-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="41b37-156">**3. novembra, utorok** : Vygeneruje sa jedna faktúra na realizačné práce, ktorá obsahuje medzník na 12000 USD, ak je označená ako **Pripravená na fakturáciu**.</span><span class="sxs-lookup"><span data-stu-id="41b37-156">**November 3, Tuesday**: One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="41b37-157">Konfigurovať automatické fakturovanie</span><span class="sxs-lookup"><span data-stu-id="41b37-157">Configure automatic invoicing</span></span>

<span data-ttu-id="41b37-158">Ak chcete nakonfigurovať automatické vytváranie faktúr, vykonajte nasledujúci postup.</span><span class="sxs-lookup"><span data-stu-id="41b37-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="41b37-159">V časti **Project Operations** prejdite na **Nastavenia** > **Nastavenie opakovanej faktúry**.</span><span class="sxs-lookup"><span data-stu-id="41b37-159">In **Project Operations**, go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="41b37-160">Vytvorte dávkovú úlohu a pomenujte ju **Vytvorenie faktúr Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="41b37-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="41b37-161">Názov dávkovej úlohy musí obsahovať slová „vytvorenie faktúr“.</span><span class="sxs-lookup"><span data-stu-id="41b37-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="41b37-162">V poli **Typ úlohy** vyberte položku **Žiadne**.</span><span class="sxs-lookup"><span data-stu-id="41b37-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="41b37-163">Štandardne sú polia **Frekvencia denne** a **Je aktívne** nastavené na **Áno**.</span><span class="sxs-lookup"><span data-stu-id="41b37-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="41b37-164">Vyberte **spustiť pracovný postup**.</span><span class="sxs-lookup"><span data-stu-id="41b37-164">Select **Run Workflow**.</span></span> <span data-ttu-id="41b37-165">V dialógovom okne **vyhľadať záznam** sa zobrazia tri pracovné postupy:</span><span class="sxs-lookup"><span data-stu-id="41b37-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="41b37-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="41b37-166">ProcessRunCaller</span></span>
- <span data-ttu-id="41b37-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="41b37-167">ProcessRunner</span></span>
- <span data-ttu-id="41b37-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="41b37-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="41b37-169">Vyberte **ProcessRunCaller** a potom **pridať**.</span><span class="sxs-lookup"><span data-stu-id="41b37-169">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="41b37-170">V ďalšom dialógovom okne kliknite na **OK**.</span><span class="sxs-lookup"><span data-stu-id="41b37-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="41b37-171">Pracovný postup **spánok** je nasledovaný pracovným postupom **proces**.</span><span class="sxs-lookup"><span data-stu-id="41b37-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="41b37-172">Môžete tiež vybrať **processrunner** v kroku 5.</span><span class="sxs-lookup"><span data-stu-id="41b37-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="41b37-173">Potom, keď vyberiete **OK**, pracovný postup **proces** je nasledovaný pracovným postupom **spánok**.</span><span class="sxs-lookup"><span data-stu-id="41b37-173">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="41b37-174">Pracovné postupy **processruncaller** a **processrunner** vytvárajú faktúry.</span><span class="sxs-lookup"><span data-stu-id="41b37-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="41b37-175">**ProcessRunCaller** volá **processrunner**.</span><span class="sxs-lookup"><span data-stu-id="41b37-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="41b37-176">**ProcessRunner** je pracovný postup, ktorý skutočne vytvára faktúry.</span><span class="sxs-lookup"><span data-stu-id="41b37-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="41b37-177">Pracovný postup prechádza všetky riadky zmluvy, pre ktoré musia byť vytvorené faktúry, a vytvára faktúry pre tieto riadky.</span><span class="sxs-lookup"><span data-stu-id="41b37-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="41b37-178">Ak chcete určiť riadky zmluvy, pre ktoré musia byť vytvorené faktúry, úloha sa pozerá na dátumy spustenia faktúry pre riadky zmluvy.</span><span class="sxs-lookup"><span data-stu-id="41b37-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="41b37-179">Ak riadky zmluvy patriace do jednej zmluvy majú rovnaký dátum spustenia faktúry, transakcie sa skombinujú do jednej faktúry, ktorá má dva riadky faktúry.</span><span class="sxs-lookup"><span data-stu-id="41b37-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="41b37-180">Ak neexistujú žiadne transakcie na vytvorenie faktúr, úloha vynechá vytvorenie faktúry.</span><span class="sxs-lookup"><span data-stu-id="41b37-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="41b37-181">Po dokončení **procesrunnera**, sa volá **processruncaller**, ktorý poskytuje čas ukončenia a je uzavretý.</span><span class="sxs-lookup"><span data-stu-id="41b37-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="41b37-182">**ProcessRunCaller** potom spustí časovač, ktorý beží 24 hodín od zadaného času ukončenia.</span><span class="sxs-lookup"><span data-stu-id="41b37-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="41b37-183">Na konci časovača, je **processruncaller** uzavretý.</span><span class="sxs-lookup"><span data-stu-id="41b37-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="41b37-184">Dávková úloha pre vytváranie faktúr je opakujúca sa úloha.</span><span class="sxs-lookup"><span data-stu-id="41b37-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="41b37-185">Ak je táto dávková úloha spustená mnohokrát, sú vytvorené viaceré inštancie úlohy a spôsobujú chyby.</span><span class="sxs-lookup"><span data-stu-id="41b37-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="41b37-186">Preto by ste mali spustiť dávkový proces len raz, a potom ho reštartovať iba v prípade, že prestane fungovať.</span><span class="sxs-lookup"><span data-stu-id="41b37-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="41b37-187">Hromadná fakturácia v aplikácii Project Operations sa spustí iba pre riadky zmlúv projektu, ktoré sú konfigurované podľa plánov faktúr.</span><span class="sxs-lookup"><span data-stu-id="41b37-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="41b37-188">Riadok zmluvy s metódou fakturácie podľa fixnej ceny musí mať nakonfigurované medzníky.</span><span class="sxs-lookup"><span data-stu-id="41b37-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="41b37-189">V riadku zmluvy projektu s metódou fakturácie podľa času a materiálu bude potrebné zostaviť plán fakturácie založený na dátume.</span><span class="sxs-lookup"><span data-stu-id="41b37-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>
